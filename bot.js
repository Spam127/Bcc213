const Discord = require('discord.js');
const client = new Discord.Client();

client.on('message',async message => {
  if(message.author.bot || message.channel.type === '-bc') return;
  let args = message.content.split(' ');
  if(args[0] === `-bc`) {
    if(!message.member.hasPermission("MANAGE_GUILD")) return message.channel.send('- **??? ?? ???? ????????? ??????? ???????? ??? ?????**');
    if(!args[1]) return message.channel.send('- **??? ???? ????? ??????? ??? ?????**');
  
    let msgCount = 0;
    let errorCount = 0;
    let successCount = 0;
    message.channel.send(`**- [ :bookmark: :: ${msgCount} ] ·??? ??????? ???????**\n**- [ :inbox_tray: :: ${successCount} ] ·??? ??????? ????????**\n**- [ :outbox_tray: :: ${errorCount} ]·??? ??????? ????? ??????**`).then(msg => {
      message.guild.members.forEach(g => {
        g.send(args.slice(1).join(' ')).then(() => {
          successCount++;
          msgCount++;
          msg.edit(`**- [ :bookmark: :: ${msgCount} ] ·??? ??????? ???????**\n**- [ :inbox_tray: :: ${successCount} ] ·??? ??????? ????????**\n**- [ :outbox_tray: :: ${errorCount} ]·??? ??????? ????? ??????**`);
        }).catch(e => {
          errorCount++;
          msgCount++;
          msg.edit(`**- [ :bookmark: :: ${msgCount} ] ·??? ??????? ???????**\n**- [ :inbox_tray: :: ${successCount} ] ·??? ??????? ????????**\n**- [ :outbox_tray: :: ${errorCount} ]·??? ??????? ????? ??????**`);
        });
      });
    });
  }
});

client.login("NTIwMjAzMTQyMTQzNjcyMzIx.DuqdtQ.FBssS0oPUZ_bzdm33Bzs-LX6kGo")
